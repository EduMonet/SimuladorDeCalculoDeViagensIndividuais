<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Simulador de Lucro Real | DriveAI</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9fafb;
      color: #333;
      padding: 20px;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      padding: 30px;
    }
    h1 {
      text-align: center;
      color: #1a73e8;
      font-size: 26px;
      margin-bottom: 10px;
    }
    .input-group {
      margin-bottom: 15px;
    }
    .input-group label {
      display: block;
      font-weight: bold;
      margin-bottom: 6px;
    }
    .input-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
    }
    .btn {
      background: #1a73e8;
      color: #fff;
      border: none;
      padding: 10px 18px;
      font-size: 15px;
      border-radius: 8px;
      cursor: pointer;
      margin-right: 10px;
      margin-top: 10px;
    }
    .btn:hover {
      background: #155ab6;
    }
    .resultado {
      margin-top: 25px;
      padding: 15px;
      background: #e8f0fe;
      border-left: 5px solid #1a73e8;
      border-radius: 8px;
      font-size: 16px;
      line-height: 1.5;
    }
    footer {
      margin-top: 50px;
      text-align: center;
      font-size: 14px;
      color: #777;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üßÆ Simulador de Lucro Real por Viagem</h1>
    <p style="text-align:center;">Insere os dados reais da tua viagem e descobre o lucro l√≠quido estimado.</p>

    <div class="input-group">
      <label for="valorRecebido">Valor recebido pelo motorista (‚Ç¨)</label>
      <input type="number" id="valorRecebido" placeholder="Ex: 2.01">
    </div>

    <div class="input-group">
      <label for="tempo">Tempo total da viagem (min)</label>
      <input type="number" id="tempo" placeholder="Ex: 10">
    </div>

    <div class="input-group">
      <label for="distancia">Dist√¢ncia percorrida (km)</label>
      <input type="number" id="distancia" placeholder="Ex: 4.8">
    </div>

    <div class="input-group">
      <label for="origem">Localidade de recolha</label>
      <input type="text" id="origem" placeholder="Ex: Oeiras">
    </div>

    <div class="input-group">
      <label for="destino">Localidade de destino</label>
      <input type="text" id="destino" placeholder="Ex: Carnaxide">
    </div>

    <button class="btn" onclick="calcularLucro()">Calcular</button>
    <button class="btn" onclick="exportarPDF()">üìÑ Exportar PDF</button>

    <div class="resultado" id="resultado"></div>
  </div>

  <footer>
    Desenvolvido por DriveAI ‚Äî Transpar√™ncia para motoristas TVDE
  </footer>

  <script>
    function calcularLucro() {
      const valorRecebido = parseFloat(document.getElementById('valorRecebido')?.value) || 0;
      const tempo = parseFloat(document.getElementById('tempo')?.value) || 0;
      const distancia = parseFloat(document.getElementById('distancia')?.value) || 0;
      const origem = document.getElementById('origem')?.value || '‚Äî';
      const destino = document.getElementById('destino')?.value || '‚Äî';

      const comissaoPercentual = 25;
      const valorOriginal = valorRecebido / (1 - comissaoPercentual / 100);
      const comissao = valorOriginal - valorRecebido;

      const custoKm = 0.30;
      const custoTempoHora = 10;
      const custoTempo = (tempo / 60) * custoTempoHora;
      const custoCarro = distancia * custoKm;

      const lucroLiquido = valorRecebido - custoCarro - custoTempo;

      document.getElementById('resultado').innerHTML = `
        üìç <strong>Origem:</strong> ${origem}<br>
        üìç <strong>Destino:</strong> ${destino}<br><br>
        üí∞ <strong>Valor recebido:</strong> ‚Ç¨${valorRecebido.toFixed(2)}<br>
        üí≥ <strong>Valor estimado pago pelo passageiro:</strong> ‚Ç¨${valorOriginal.toFixed(2)}<br>
        üßæ <strong>Comiss√£o estimada (25%):</strong> ‚Ç¨${comissao.toFixed(2)}<br>
        ‚õΩ <strong>Custo do autom√≥vel:</strong> ‚Ç¨${custoCarro.toFixed(2)}<br>
        ‚è±Ô∏è <strong>Custo do tempo:</strong> ‚Ç¨${custoTempo.toFixed(2)}<br><br>
        üí∏ <strong>Lucro l√≠quido estimado:</strong> ‚Ç¨${lucroLiquido.toFixed(2)}<br>
        ${lucroLiquido < 0 ? '‚ö†Ô∏è Esta viagem representa preju√≠zo para o motorista.' : ''}
      `;
    }

    async function exportarPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const valorRecebido = parseFloat(document.getElementById('valorRecebido')?.value) || 0;
      const tempo = parseFloat(document.getElementById('tempo')?.value) || 0;
      const distancia = parseFloat(document.getElementById('distancia')?.value) || 0;
      const origem = document.getElementById('origem')?.value || '‚Äî';
      const destino = document.getElementById('destino')?.value || '‚Äî';

      const comissaoPercentual = 25;
      const valorOriginal = valorRecebido / (1 - comissaoPercentual / 100);
      const comissao = valorOriginal - valorRecebido;

      const custoKm = 0.30;
      const custoTempoHora = 10;
      const custoTempo = (tempo / 60) * custoTempoHora;
      const custoCarro = distancia * custoKm;

      const lucroLiquido = valorRecebido - custoCarro - custoTempo;

      doc.setFontSize(14);
      doc.text("Simulador de Lucro Real por Viagem", 20, 20);
      doc.setFontSize(12);
      doc.text("üìã Dados inseridos:", 20, 30);

      let y = 36;
      doc.text(`Origem: ${origem}`, 20, y); y += 6;
      doc.text(`Destino: ${destino}`, 20, y); y += 6;
      doc.text(`Valor recebido: ‚Ç¨${valorRecebido.toFixed(2)}`, 20, y); y += 6;
      doc.text(`Tempo total: ${tempo} min`, 20, y); y += 6;
      doc.text(`Dist√¢ncia: ${distancia} km`, 20, y); y += 10;

      doc.text("üìä Estimativas:", 20, y); y += 6;
      doc.text(`Valor estimado pago pelo passageiro: ‚Ç¨${valorOriginal.toFixed(2)}`, 20, y); y += 6;
      doc.text(`Comiss√£o estimada (25%): ‚Ç¨${comissao.toFixed(2)}`, 20, y); y += 6;
      doc.text(`Custo do autom√≥vel: ‚Ç¨${c